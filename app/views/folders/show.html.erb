<div class="flex gap-4">
  <div class="w-64 shrink-0">
    <%= render partial: "tree", locals: { folder: @folder } %>
  </div>
  <div class="flex-1">
    <h2 class="text-lg font-semibold"><%= @folder.name %></h2>
    <div class="mt-4">
      <h3 class="font-medium mb-2">Subfolders</h3>
      <ul class="list-disc ml-6">
        <% @folder.subfolders.order(:name).each do |f| %>
          <li><%= link_to f.name, folder_path(f), data: { turbo_frame: "main" } %></li>
        <% end %>
      </ul>
    </div>
    <div class="mt-6">
      <h3 class="font-medium mb-2">Products</h3>
      <div id="products">
        <% @folder.products.order(:name).limit(50).each do |p| %>
          <div class="flex items-center gap-3 py-2 border-b">
            <div class="w-12 h-12 bg-gray-100 rounded overflow-hidden">
              <% if p.product_image.attached? %>
                <%= image_tag url_for(p.product_image), class: "w-full h-full object-cover" %>
              <% end %>
            </div>
            <div class="flex-1">
              <div class="font-medium"><%= p.name %></div>
              <div class="text-sm text-gray-600">Qty: <%= p.qty %></div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
